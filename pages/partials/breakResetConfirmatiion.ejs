<!-- ////////////// - EMERGENCY RESET BREAK TIME - ////////////////-->

<button id="reset-break-time" class="reset-break-time-button">Reset Breaks</button>

<div id="confirmation-modal" class="confirmation-modal">
    <div class="confirmation-modal-content">
        <greet class="confirmation-modal-title">Are you sure you want to reset total break time?</greet>
        <span class="confirmation-modal-close">&times;</span>
        <form id="confirm-modal-form" class="confirm-modal-form confirm-modal-form-top">
            <button id="modal-ok" class="form-button">OK</button>
        </form>
    </div>
</div>
 
<br>

<script>
    window.addEventListener('DOMContentLoaded', function () {
        const modal = document.getElementById("confirmation-modal");
        const close = modal.querySelector(".confirmation-modal-close");
        close.onclick = () => { modal.style.display = "none"; };
        document.getElementById('reset-break-time').addEventListener('click', showConfirmationModal);
        document.getElementById('modal-ok').addEventListener('click', handleModalOk);
        const socket = io();
        socket.on('reload', function () {
            window.location.reload();
        });
    });
    function showConfirmationModal() {
        document.getElementById('confirmation-modal').style.display = 'block';
    }

    function handleModalOk() {
        document.getElementById('confirmation-modal').style.display = 'none';
        resetBreakTimeForAllUsers();
    }

    async function resetBreakTimeForAllUsers() {
        try {
            const response = await fetch('/resetbreaktime', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
            });

            if (response.status === 200) {
                console.log('Response status:', response.status);
            } else {
                console.log('Response status:', response.status);
            }
        } catch (error) {
            console.error('Error resetting break time:', error);
        }
    }

</script>